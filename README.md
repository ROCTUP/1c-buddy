# 1C Buddy - –ß–∞—Ç, MCP —Å–µ—Ä–≤–µ—Ä –∏ OpenAI —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π API —à–ª—é–∑ –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å 1–°:–ù–∞–ø–∞—Ä–Ω–∏–∫

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üí¨ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ —Å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏ (–∏—Å—Ç–æ—Ä–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ)
- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –¥–ª—è –∫–æ–¥–∞ 1C (BSL) –∏ XML —Å –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º
- –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ (.bsl, .xml, .txt)
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –ü–æ–∏—Å–∫ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è mermaid –¥–∏–∞–≥—Ä–∞–º–º —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ png 
- –ü–æ–∏—Å–∫ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- –≠–∫—Å–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ –≤ JSON
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤ (–≤—Ö–æ–¥—è—â–∏–µ/–∏—Å—Ö–æ–¥—è—â–∏–µ/–≤—Å–µ–≥–æ)
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ —Å –≥–æ—Ä—è—á–∏–º–∏ –∫–ª–∞–≤–∏—à–∞–º–∏

![–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞](chat_ui.png)

### üîß MCP —Å–µ—Ä–≤–µ—Ä
- –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
  - `ask_1c_ai` - –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –∏ —Å–æ–≤–µ—Ç—ã –ø–æ 1C:–ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ
  - `explain_1c_syntax` - –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤/—Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ 1C —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
  - `check_1c_code` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–¥–∞ –Ω–∞ –æ—à–∏–±–∫–∏ (syntax/logic/performance)

### üöÄ OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π API
- –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å API OpenAI Chat Completions (`/v1/chat/completions`)
- –ü–æ—Ç–æ–∫–æ–≤—ã–µ –∏ –Ω–µ–ø–æ—Ç–æ–∫–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Server-Sent Events (SSE)
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å Bearer —Ç–æ–∫–µ–Ω–∞–º–∏


## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω code.1c.ai** —Å —Å–∞–π—Ç–∞ [code.1c.ai](https://code.1c.ai)


2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å Docker:**
   ```bash
   docker pull roctup/1c-buddy
   
   docker run -d --name 1c-buddy --restart unless-stopped -p 6002:6002 -e "ONEC_AI_TOKEN=<your_1c_ai_token>" roctup/1c-buddy 
   ```
   
   –ï—Å–ª–∏ –Ω—É–∂–µ–Ω —Ç–∞–∫–∂–µ OpenAI API —à–ª—é–∑:
   
   ```bash
   docker pull roctup/1c-buddy
   
   docker run -d --name 1c-buddy --restart unless-stopped -p 6002:6002 -e "ONEC_AI_TOKEN=<your_1c_ai_token>" -e "OPENAI_COMPAT_API_KEY=<your_custom_api_key>" roctup/1c-buddy 
   ```
   

3. **–ù–∞—á–Ω–∏—Ç–µ –æ–±—â–µ–Ω–∏–µ:**
   - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞: http://localhost:6002/chat

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ MCP –¥–ª—è IDE:**
    ```bash
    {
      "mcpServers": {   
        "1c-buddy-mcp": {
          "url": "http://localhost:6002/mcp",
          "connection_id": "1c_buddy_service_001",
          "alwaysAllow": [],
          "type": "streamable-http",
          "timeout": 300,
          "disabled": false
       }
     }
   }
    ```

5.  **–û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ OpenAI API:**

    –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª—é–±–æ–π OpenAI SDK –∏–ª–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É:
	
  	```python
  	from openai import OpenAI
  
  	client = OpenAI(
  		base_url="http://localhost:6002/v1",
  		api_key="your_custom_api_key"
  	)
  
  	# –ù–µ–ø–æ—Ç–æ–∫–æ–≤—ã–π —Ä–µ–∂–∏–º
  	response = client.chat.completions.create(
  		model="1c-buddy",
  		messages=[{"role": "user", "content": "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å HTTP–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –≤ 1–°?"}]
  	)
  	print(response.choices[0].message.content)
  
  	# –ü–æ—Ç–æ–∫–æ–≤—ã–π —Ä–µ–∂–∏–º
  	for chunk in client.chat.completions.stream(
  		model="1c-buddy",
  		messages=[{"role": "user", "content": "–û–±—ä—è—Å–Ω–∏ –æ–±—ä–µ–∫—Ç –ó–∞–ø—Ä–æ—Å"}]
  	):
  		print(chunk.choices[0].delta.content, end="")
  	```


## –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–û–≥—Ä–æ–º–Ω–æ–µ —Å–ø–∞—Å–∏–±–æ –∞–≤—Ç–æ—Ä—É –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ MCP —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è 1–°:–ù–∞–ø–∞—Ä–Ω–∏–∫: **[artesk/1copilot_MCP](https://github.com/artesk/1copilot_MCP)** 

